# 二叉树 (Binary Tree) 

## 1. 二叉树的定义

二叉树是一种非线性数据结构，代表“祖先”与“后代”之间的派生关系，体现了“一分为二”的分治逻辑。

- **基本单元**：节点 (Node)。
- **结构**：每个节点包含值、左子节点引用和右子节点引用。
- **特性**：除叶节点外，其他所有节点都包含子节点和非空子树。

### C/C++ 节点定义

C

```
/* 二叉树节点结构体 */
typedef struct TreeNode {
    int val;                // 节点值
    int height;             // 节点高度 (某些算法如AVL树需要)
    struct TreeNode *left;  // 左子节点指针
    struct TreeNode *right; // 右子节点指针
} TreeNode;
```

## 2. 常见术语

- **根节点 (Root Node)**：位于二叉树顶层的节点，没有父节点。
- **叶节点 (Leaf Node)**：没有子节点的节点，其两个指针均指向 `NULL`。
- **边 (Edge)**：连接两个节点的线段，即指针。
- **层 (Level)**：从顶至底递增，通常规定**根节点所在层为 1**。
- **度 (Degree)**：节点的子节点数量。二叉树中取值范围为 0, 1, 2。

### 关于高度与深度的定义

- **二叉树的高度 (Height)**：从根节点到最远叶节点所经过的**边**的数量。
- **节点的深度 (Depth)**：从根节点到该节点所经过的**边**的数量。
- **节点的高度 (Height)**：从距离该节点最远的叶节点到该节点所经过的**边**的数量。

> **⚠️ 注意**：通常将“高度”和“深度”定义为“经过的**边**的数量”，但部分教材定义为“经过的**节点**的数量”。若按节点计算，数值 = 按边计算 + 1。

## 3. 二叉树的存储结构

### 3.1 顺序存储

使用一组地址连续的存储单元（数组）来存储数据元素。

- **完全二叉树**：从根起按层序存储（自上而下、自左而右）。
- **一般二叉树**：将每个节点与完全二叉树相对照，空缺位置用特殊值（如 0 或 NULL）占位。

C

```
/* 二叉树的顺序存储表示 */
#define MAXSIZE 100
typedef int TElemType;
typedef TElemType BiTree[MAXSIZE];

BiTree bt; 
// 缺点：对于稀疏的二叉树（如右斜树），会浪费大量空间。
```

### 3.2 链式存储 (最常用)

使用链表节点来存储，每个节点包含数据域和指针域。

C

```
/* 二叉树的二叉链表存储表示 */
typedef struct BiTNode{
    TElemType data;                  // 节点数据域
    struct BiTNode *lchild, *rchild; // 左右孩子指针
} BiTNode, *BiTree;
```

## 4. 常见二叉树类型

### 4.1 完美二叉树 (Perfect Binary Tree)

- **定义**：所有层的节点都被完全填满。
- **特征**：叶节点度为 0，其余节点度为 2。
- **数量关系**：若高度为 $h$（按边算），则节点总数为 $2^{h+1}-1$。
- **注**：国内教材常称其为**满二叉树**。

### 4.2 完全二叉树 (Complete Binary Tree)

- **定义**：仅允许最底层的节点不完全填满，且最底层的节点必须**从左至右**依次连续填充。
- **关系**：完美二叉树一定是一棵完全二叉树。

### 4.3 完满二叉树 (Full Binary Tree)

- **定义**：除了叶节点之外，其余所有节点都有两个子节点（即不存在度为 1 的节点）。

### 4.4 平衡二叉树 (Balanced Binary Tree / AVL Tree)

- **定义**：任意节点的左子树和右子树的高度之差的绝对值不超过 1。

## 5. 二叉树的退化与性能对比

- **最佳结构**：完美二叉树。充分发挥分治优势。
- **最差结构**：链表。当所有节点都偏向一侧时，二叉树退化为线性结构，查找时间复杂度退化至 $O(n)$。

### 结构指标对比表

| **指标**                        | **完美二叉树 (最佳)** | **链表 (最差)** |
| ------------------------------- | --------------------- | --------------- |
| **第 $i$ 层的节点数量**         | $2^{i-1}$             | $1$             |
| **高度为 $h$ 的树的叶节点数量** | $2^h$                 | $1$             |
| **高度为 $h$ 的树的节点总数**   | $2^{h+1}-1$           | $h+1$           |
| **节点总数为 $n$ 的树的高度**   | $\log_2(n+1) - 1$     | $n-1$           |
# 图 (Graph)

## 1. 图的介绍
图是一种非线性数据结构，由 **顶点 (vertex)** 和 **边 (edge)** 组成。
我们可以将图 $G$ 抽象地表示为一组顶点 $V$ 和一组边 $E$ 的集合。

- $V=\{1, 2, 3, 4, 5\}$
- $E=\{(1,2), (1,3), (1,5), (2,3), (2,4), (2,5), (4,5)\}$
- $G=\{V, E\}$

**与其他数据结构的区别：**
> * **链表**：线性关系
> * **树**：分治关系（层次结构）
> * **图**：网络关系（自由度更高）



### 1.1 图的常见类型与术语

#### 1.1.1 有向图 / 无向图
根据边是否有方向，可分为无向图和有向图。

- **无向图 (Undirected Graph)**：边表示两顶点之间的“双向”连接关系。
    - *例子*：微信或 QQ 中的“好友关系”。
- **有向图 (Directed Graph)**：边具有方向性，即 `A->B` 和 `B->A` 是相互独立的。
    - *例子*：微博或抖音上的“关注”与“被关注”关系。



#### 1.1.2 连通图 / 非连通图
根据所有顶点是否连通，可分为连通图和非连通图。

- **连通图 (Connected Graph)**：从某个顶点出发，可以到达其余任意顶点。
- **非连通图 (Disconnected Graph)**：从某个顶点出发，至少有一个顶点无法到达。

#### 1.1.3 有权图 / 无权图
- **有权图 (Weighted Graph)**：为边添加“权重”变量。
    - *例子*：王者荣耀中玩家之间的“亲密度”，或者地图导航中两地之间的“距离”。

#### 1.1.4 常见术语
- **邻接 (Adjacency)**：当两顶点之间存在边相连时，称这两顶点“邻接”。
- **路径 (Path)**：从顶点 A 到顶点 B 经过的边构成的序列。
- **度 (Degree)**：一个顶点拥有的边数。
    - **入度 (In-degree)**：有多少条边指向该顶点（仅限有向图）。
    - **出度 (Out-degree)**：有多少条边从该顶点指出（仅限有向图）。

---

## 2. 图的表示
图的常用表示方式包括 **邻接矩阵** 和 **邻接表**。

### 2.1 邻接矩阵 (Adjacency Matrix)
设图的顶点数量为 $n$，邻接矩阵使用一个 $n \times n$ 大小的矩阵来表示图。
- **行/列**：代表一个顶点。
- **元素**：代表边（用 1 或 0 表示是否存在，或者存储权重）。

设邻接矩阵为 $M$、顶点列表为 $V$，那么：
- $M[i,j]=1$ 表示 $V[i]$ 到 $V[j]$ 之间存在边。
- $M[i,j]=0$ 表示两顶点之间无边。

**特性：**
1.  在简单图中，主对角线元素通常无意义（顶点不与自身相连）。
2.  对于**无向图**，矩阵关于主对角线**对称**。
3.  **优缺点**：
    - **优点**：增删查改效率极高，时间复杂度为 `O(1)`。
    - **缺点**：空间复杂度为 `O(n^2)`，如果图很稀疏（边很少），会浪费大量内存。



### 2.2 邻接表 (Adjacency List)
使用 $n$ 个链表来表示图。第 $i$ 个链表对应顶点 $i$，其中存储了该顶点的所有邻接顶点。

**特性：**
1.  **节省空间**：仅存储实际存在的边，适合稀疏图。
2.  **效率权衡**：查找某条边是否存在需要遍历链表，时间效率不如矩阵。
3.  **优化方案**：
    - 类似哈希表的“链式地址法”。
    - 如果链表过长，可转化为 AVL 树或红黑树（时间效率优化至 `O(log n)`）。



---

## 3. 图的常见应用
许多现实系统可以用图来建模，相应的问题也可以约化为图计算问题。

**表 9-1 现实生活中常见的图**

| 应用场景 | 顶点 | 边 | 图计算问题 |
| :--- | :--- | :--- | :--- |
| **社交网络** | 用户 | 好友关系 | 潜在好友推荐 |
| **地铁线路** | 站点 | 站点连通性 | 最短路线推荐 (Dijkstra) |
| **太阳系** | 星体 | 万有引力 | 行星轨道计算 |
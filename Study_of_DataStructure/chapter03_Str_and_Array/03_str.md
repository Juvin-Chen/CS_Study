# 串的模式匹配

- 模式匹配Index(S, T, pos)是串的一种重要操作

- 很多软件，若有“编辑”菜单项的话，则其中必有“查找”子菜单项

- 查找的本质就是字符串匹配

## BF算法（简单匹配算法）

### 算法思路

尝试从s的每一个字符开始，依次与t的字符进行匹配。

1、第一趟：将主串S中从第pos个字符开始、长度与T相等的子串与T比较，如果相等则返回pos；否则下一步；

2、第二趟：从主串S中从第pos+1个字符开始、长度与T相等的子串与T比较，如果相等则返回pos+1；否则下一步；

3、依此类推...

4、pos后所有字符作为子串开头，无一成功，则失败返回。

``` c++
int Index_BF(SString S,SString T,int p){
    //返回子串T在主串S中第p个字符之后的位置
    i=p; j=1;
    while(i<=S.length&&j<=T.length()){
        if(S.ch[i]==T.ch[j]){ ++i; ++j; }
        else{ i=i-j+2; j=1 }
    }
    if(j>T.length) return i-T.length;
    else return 0;
}
```

### BF算法分析

算法在字符比较不相等，需要回溯：模式串指针j回退j-1步，主串指针i回退j-2步。

- 最好情况下的时间复杂度为O(m)：s[1..m]=T

- 最坏情况下的时间复杂度为O(n×m)

最终匹配失败或者最终成功但仅s[n-m+1..n]=T，且每次失败都匹配到了T的最后一个字符

平均的时间复杂度为O(n×m)。

### BF算法缺陷

- S的指针 i 回溯，已经被检索过的部分主串被重复检索。

- 同时，T的指针 j 也会回溯到起始位置。

  

## KMP算法

D.E.Knuth、J.H.Morris和V.R.Pratt共同提出，简称KMP算法。

该算法较BF算法有较大改进，主要是利用匹配过程中已经获得的结果，消除主串指针的回溯，以减少比较次数，从而使算法的时间效率提高。

KMP算法的时间复杂度可以达到O(m+n)

